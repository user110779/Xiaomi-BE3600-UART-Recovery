## 1. Підготовка обладнання та мережі
**Підключення UART:**
* **TX роутера** -> **RX адаптера**
* **RX роутера** -> **TX адаптера**
* **GND** -> **GND** (спільна земля)
* **VCC НЕ ПІДКЛЮЧАЄМО!**

**Налаштування ПК:**
* **Статичний IP:** `192.168.31.100` (маска `255.255.255.0`).
* **TFTP:** Запустити **Tftpd64**, вказати папку з `.bin` дампами.
* **Термінал:** Putty, швидкість **115200**, 8N1.

---

## 2. Вхід в консоль U-Boot
Подай живлення на роутер. В терміналі Putty почне бігти текст. Відразу затискай **Enter** або клавішу **F**, поки не побачиш запит: `IPQ5322#`.

---

## 3. Конфігурація оточення (Environment)
Введи ці команди по черзі:

```bash
setenv ipaddr 192.168.31.1
setenv serverip 192.168.31.100
setenv netmask 255.255.255.0
saveen
```
Перевір зв'язок: ping 192.168.31.100. Має бути host is alive.

4. Робота з розділами (алгоритм "заливки")
Ми качаємо файл в RAM (адреса 0x44000000), а потім пишемо у Flash.

Крок 1: Дивимось карту пам'яті Введи smeminfo, щоб знайти Start та Size розділів.

Крок 2: Відновлення Kernel (mtd23)

Bash

tftp 0x44000000 mtd23.bin
nand erase 0x02000000 0x00800000
nand write 0x44000000 0x02000000 ${filesize}
Крок 3: Відновлення Rootfs (mtd24)

Bash

tftp 0x44000000 mtd24.bin
nand erase 0x02800000 0x04000000
nand write 0x44000000 0x02800000 ${filesize}
5. Нюанс Dual Boot (Перемикання систем)
Якщо роутер в циклічному ребуті:

На першу систему: setenv flag_boot_rootfs 0

На другу систему: setenv flag_boot_rootfs 1

Зберегти: saveenv та reset.

⚠️ Типова проблема: «Сміття» в консолі
Якщо бачиш ієрогліфи:

Контакт GND: Перевір землю! Це причина №1.

Швидкість: Має бути чітко 115200.

RX/TX: Поміняй місцями, якщо консоль пуста.
